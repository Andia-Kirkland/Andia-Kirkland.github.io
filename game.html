<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>和石像生一起下棋吧！</title>
    <style>
        @import url("https://fonts.googleapis.com/css2?family=Bungee+Inline&display=swap");

        * {
            padding: 0;
            margin: 0;
            box-sizing: inherit;
        }

        body {
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            text-align: center;
            font-family: "Bungee Inline", cursive;
            color: #FFF3D7;
            overflow: hidden;
        }

        video {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover; 
            z-index: -999;
        }

        .wrapper {
            background-image: url('art/宣纸底纹.jpg');
            padding: 50px;
        }

        .current-status {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 25px;
        }

        .current-status p {
            margin: 0 5px 0 0;
            font-size: 24px;
			color:#423422;
        }

        .current-status img {
            width: auto;
            height: 50px;
        }

        .board {
            display: grid;
            grid-template-columns: repeat(3, minmax(90px, 1fr));
            grid-template-rows: repeat(3, minmax(90px, 1fr));
            grid-gap: 12px;
            width: 100%;
            height: 100%;
            max-width: 495px;
            margin: 0 auto 15px;
        }

        /* 鼠标悬浮的时候显示图片 */
        .board.unicorn .cell:not(.dragon):not(.unicorn):hover::before,
        .board.dragon .cell:not(.dragon):not(.unicorn):hover::before {
            content: "";
            width: 70%;
            height: 70%;
            display: block;
            position: absolute;
            background-repeat: no-repeat;
            top: 50%;
            left: 50%;
            transform: translate3d(-50%, -50%, 0);
            background-size: contain;
            opacity: 50%;
        }

        .board.unicorn .cell:not(.dragon):hover::before {
            background-image: url("art/羊.png");
        }

        .board.dragon .cell:not(.unicorn):hover::before {
            background-image: url("art/象.png");
        }

        .cell {
            cursor: pointer;
            position: relative;
            background-color: #f5f5f5;
            width: 90px;
            height: 90px;
            opacity: 0.5;
            transition: opacity 0.2s ease-in-out;
        }

        .cell:hover {
            opacity: 1;
        }

        .cell.dragon,
        .cell.unicorn {
            opacity: 1;
            position: relative;
            cursor: not-allowed;
        }

        .cell.dragon::before,
        .cell.unicorn::before {
            content: "";
            width: 70%;
            height: 70%;
            display: block;
            position: absolute;
            background-repeat: no-repeat;
            top: 50%;
            left: 50%;
            transform: translate3d(-50%, -50%, 0);
            background-size: contain;
        }

        .cell.dragon::before {
            background-image: url("art/象.png");
        }

        .cell.unicorn::before {
            background-image: url("art/羊.png");
        }

        .game-end-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #FFF3D7;
        }
		.game-end-overlay {
		    background-image: url('art/长图2.0.jpg'); 
		    background-color: #FFF3D7; 
		    background-repeat: no-repeat;
		    background-size: cover;
		    background-position: center;
		}

        .game-end-overlay.show {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        .winning-message {
            margin: -50px 0 20px;
        }

        .winning-message img {
            width: 100px;
        }

        .winning-message p {
            font-size: 60px;
            margin: 0;
			color:#423422;
        }

        .btn-container {
            position: relative;
			display: flex;
			gap: 40px; 
        }
		
        .reset-button {
            color: #f5f5f5;
            font-family: "Bungee Inline", cursive;
            font-size: 30px;
            white-space: nowrap;
            border: none;
            padding: 10px 20px;
            background-color: #4D402C;;
            box-shadow: 5px 5px 0 #FFD693;
            cursor: pointer;
            transition: transform 0.1s ease-in-out;
            position: relative;
        }

        .reset-button:hover {
            transform: scale(1.2);
        }

        .reset-button:active {
            top: 6px;
            left: 6px;
            box-shadow: none;
            background-color: #4D402C;
        }
    </style>
</head>
<style id="uagb-style-conditional-extension">@media (min-width: 1025px)
{body .uag-hide-desktop.uagb-google-map__wrap,body .uag-hide-desktop{display:none !important}}
@media (min-width: 768px) and (max-width: 1024px)
{body .uag-hide-tab.uagb-google-map__wrap,body .uag-hide-tab{display:none !important}}
@media (max-width: 767px){body .uag-hide-mob.uagb-google-map__wrap,body .uag-hide-mob{display:none !important}}
</style>
<style id="uagb-style-frontend-0">.uag-blocks-common-selector{z-index:var(--z-index-desktop) !important}
@media (max-width: 976px){.uag-blocks-common-selector{z-index:var(--z-index-tablet) !important}}
@media (max-width: 767px){.uag-blocks-common-selector{z-index:var(--z-index-mobile) !important}}
</style><link rel="icon" href="icon/log o 34x34.png" sizes="32x32" />
<link rel="icon" href="icon/logo 192x192.png" sizes="192x192" />
<link rel="apple-touch-icon" href="icon/logo 192x192.png.png" />
<meta name="msapplication-TileImage" content="icon/logo 192x192.png" />
</head>

<body>

    <div class="wrapper">
        <div class="current-status" id="currentStatus">
            <img src="art/羊.png" id="currentBeastImg" alt="">
            <p>&nbsp; 的回合！</p>
        </div>
        <div class="board" id="board">
            <div class="cell" data-cell></div>
            <div class="cell" data-cell></div>
            <div class="cell" data-cell></div>
            <div class="cell" data-cell></div>
            <div class="cell" data-cell></div>
            <div class="cell" data-cell></div>
            <div class="cell" data-cell></div>
            <div class="cell" data-cell></div>
            <div class="cell" data-cell></div>
        </div>
        <div class="game-end-overlay" id="gameEndOverlay">
            <div class="winning-message" data-winning-message>
                <p></p>
            </div>
				<div class="btn-container">
				    <button class="reset-button" id="resetButton">再来一局</button>
				</div>
            </div>
        </div>
    </div>
    <video src="连连看背景.mp4" loop autoplay id="bgVideo"></video>




    <script>

        // 获取页面元素
        const board = document.getElementById('board');
        const cells = document.querySelectorAll('[data-cell]');
        const currentStatus = document.getElementById('currentStatus');
        const resetButton = document.getElementById('resetButton');
        const gameEndOverlay = document.getElementById('gameEndOverlay');
        const currentBeastStatusImg = document.getElementById('currentBeastImg');
        const winningMessage = document.querySelector('[data-winning-message]');
        const winningMessageText = document.querySelector('[data-winning-message] p');
        const winningMessageImg = document.createElement('img');
        // 初始化游戏状态
        let gameIsLive = true;
        let unicornTurn = true;
        let winner = null;
        // 所有获胜组合
        const winningCombinations = [
            [0, 1, 2],
            [3, 4, 5],
            [6, 7, 8],
            [0, 3, 6],
            [1, 4, 7],
            [2, 5, 8],
            [0, 4, 8],
            [2, 4, 6]
        ];
        // 设置鼠标悬停时的样式
        const setBoardHoverClass = () => {
            board.classList.remove('unicorn');
            board.classList.remove('dragon');
            if (unicornTurn) {
                board.classList.add('unicorn');
            } else {
                board.classList.add('dragon');
            }
        }
        // 在格子上放置图片
        const placeBeastImg = (cell, currentBeast) => {
            cell.classList.add(currentBeast);
        }
        // 切换回合
        const swapTurns = () => {
            unicornTurn = !unicornTurn;
        }
        // 更新当前状态
        const updateCurrentStatus = () => {
            if (unicornTurn) {
                currentBeastStatusImg.src = 'art/羊.png';
                currentBeastStatusImg.alt = 'unicorn';
            } else {
                currentBeastStatusImg.src = 'art/象.png';
                currentBeastStatusImg.alt = 'dragon';
            }
        }
        // 检查是否获胜
        const checkWin = (currentBeast) => {
            return winningCombinations.some(combination => {
                return combination.every(i => {
                    return cells[i].classList.contains(currentBeast);
                })
            });
        }
        // 判断是否平局
        const isDraw = () => {
            return [...cells].every(cell => {
                return cell.classList.contains('unicorn') || cell.classList.contains('dragon');
            })
        }
        // 开始游戏
        const startGame = () => {
            cells.forEach(cell => {
                winningMessageImg.remove();
                cell.classList.remove('unicorn');
                cell.classList.remove('dragon');
                cell.removeEventListener('click', handleCellClick);
                cell.addEventListener('click', handleCellClick, { once: true });
            });
            setBoardHoverClass();
            gameEndOverlay.classList.remove('show');
        }
        // 结束游戏
        const endGame = (draw) => {
            if (draw) {
                winningMessageText.innerText = `小友莫灰心，不妨再来一局？`;
            } else {
                winningMessageImg.src = unicornTurn ? 'art/羊.png' : 'art/象.png';
                winningMessageImg.alt = unicornTurn ? 'unicorn' : 'dragon';
                winningMessage.insertBefore(winningMessageImg, winningMessageText);
                winningMessageText.innerText = `小友果然棋高一著！`
            }
            gameEndOverlay.classList.add('show');
        }
        // 处理格子点击事件
        const handleCellClick = (e) => {
            const cell = e.target;
            const currentBeast = unicornTurn ? 'unicorn' : 'dragon';
            placeBeastImg(cell, currentBeast);
            if (checkWin(currentBeast)) {
                endGame(false);
            } else if (isDraw()) {
                endGame(true);
            } else {
                swapTurns();
                updateCurrentStatus();
                setBoardHoverClass();
            }
        }
        // 重置游戏
        resetButton.addEventListener('click', startGame);
        // 开始游戏
        startGame();
        // 控制游戏音乐
        document.addEventListener('DOMContentLoaded', function() {
            const video = document.getElementById('bgVideo');
            const playPromise = video.play();
            
            if (playPromise !== undefined) {
                playPromise.catch(error => {
                    console.log('自动播放被阻止，需要用户交互');
                    const audioHint = document.createElement('div');
                    audioHint.innerHTML = '三点连一线即胜出,点击任意位置开始';
                    audioHint.style.cssText = `
                        position: fixed;
                        top: 50%;
                        left: 50%;
                        transform: translate(-50%, -50%);
                        background: rgba(0,0,0,0.8);
                        color: white;
                        padding: 20px 40px;
                        border-radius: 10px;
                        cursor: pointer;
                        z-index: 9999;
                        text-align: center;
                        font-family: Arial, sans-serif;
                    `;
                    
                    document.body.appendChild(audioHint);
                    
                    // 点击后播放
                    const playAudio = function() {
                        video.play().then(() => {
                            audioHint.remove();
                            document.removeEventListener('click', playAudio);
                            document.removeEventListener('keydown', playAudio);
                        }).catch(e => {
                            console.log('播放失败:', e);
                        });
                    };
                    
                    document.addEventListener('click', playAudio);
                    document.addEventListener('keydown', playAudio);
                    
                    // 3秒后自动移除提示
                    setTimeout(() => {
                        if (audioHint.parentNode) {
                            audioHint.remove();
                        }
                    }, 3000);
                });
            }
        });

    </script>
</body>
<script type="speculationrules">
{"prefetch":[{"source":"document","where":{"and":[{"href_matches":"\/*"},{"not":{"href_matches":["\/wp-*.php","\/wp-admin\/*","\/wp-content\/uploads\/*","\/wp-content\/*","\/wp-content\/plugins\/*","\/wp-content\/themes\/twentytwentyfour\/*","\/*\\?(.+)"]}},{"not":{"selector_matches":"a[rel~=\"nofollow\"]"}},{"not":{"selector_matches":".no-prefetch, .no-prefetch a"}}]},"eagerness":"conservative"}]}
</script>
<!-- 自定义光标 HTML-->
<div id="custom-cursor" class="custom-cursor"></div>

<style>
  /* 默认隐藏系统光标 */
  @media (pointer: fine) {
    *:not(input):not(textarea):not(.custom-cursor),
    *:not(input):not(textarea):not(.custom-cursor)::before,
    *:not(input):not(textarea):not(.custom-cursor)::after {
      cursor: none !important;
    }
 
    #custom-cursor {
      display: block;
      position: fixed;
      top: 0;
      left: 0;
      width: 20px;
      height: 20px;
      background-color: #E3E3E3;
      border-radius: 50%;
      pointer-events: none;
      transform: translate(-50%, -50%);
      transition: background-color 0.3s ease, transform 0.2s ease;
      z-index: 999999;
      opacity: 1;
      mix-blend-mode: normal;
    }

    #custom-cursor.active {
      transform: translate(-50%, -50%) scale(0.8);
      background-color: #999;
    }
  }
</style>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    // 检查是否是桌面端（pointer: fine）
    const isDesktop = window.matchMedia("(pointer: fine)").matches;
    if (!isDesktop) return;

    const cursor = document.getElementById("custom-cursor");
    let mouseX = window.innerWidth / 2;
    let mouseY = window.innerHeight / 2;

    if (cursor) {
      cursor.style.left = mouseX + "px";
      cursor.style.top = mouseY + "px";

      document.addEventListener("mousemove", (e) => {
        mouseX = e.clientX;
        mouseY = e.clientY;
        cursor.style.left = mouseX + "px";
        cursor.style.top = mouseY + "px";
      });

      document.addEventListener("mousedown", () => {
        cursor.classList.add("active");
      });

      document.addEventListener("mouseup", () => {
        cursor.classList.remove("active");
      });
    }
  });
</script>


<script>
  document.addEventListener('DOMContentLoaded', function () {
    const btn = document.getElementById('back-to-top');

    window.addEventListener('scroll', function () {
      if (window.scrollY > 300) {
        btn.style.display = 'block';
      } else {
        btn.style.display = 'none';
      }
    });

    btn.addEventListener('click', function () {
      window.scrollTo({ top: 0, behavior: 'smooth' });
    });
  });
</script>

<script>
  const startTime = Date.now(); // 记录启动时间

  document.addEventListener("DOMContentLoaded", () => {
    const preloader = document.getElementById("preloader");

    // 只在首页执行启动页动画，判断条件：
    // 严格等于 首页/（末尾带斜杠）
    if (window.location.href === "# ") {
      // 显示启动页
      preloader.style.display = "flex";

      let mouseX = window.innerWidth / 2;
      let mouseY = window.innerHeight / 2;

      // 监听鼠标移动，更新圆形蒙版的位置
      document.addEventListener("mousemove", (e) => {
        mouseX = e.clientX;
        mouseY = e.clientY;
      });

      window.addEventListener("load", () => {
        const elapsed = Date.now() - startTime;
        const minDuration = 500; // 启动页最短显示时间（ms）
        const delay = elapsed < minDuration ? (minDuration - elapsed) : 0;

        setTimeout(() => {
          preloader.style.transition = "clip-path 1s ease";
          preloader.style.clipPath = `circle(0px at ${mouseX}px ${mouseY}px)`;

          // 动画结束后隐藏启动页容器
          preloader.addEventListener("transitionend", () => {
            preloader.style.display = "none";
          }, { once: true });
        }, delay);
      });
    } else {
      // 非首页隐藏启动页，避免影响页面
      preloader.style.display = "none";
    }
  });
</script>


    <script>
    document.addEventListener('DOMContentLoaded', function() {

        var backButton = document.getElementById('mobile-back-button');

        backButton.addEventListener('click', function() {
            if (document.referrer && document.referrer.indexOf(window.location.host) !== -1) {
                window.history.back();
            } else {
                window.location.href = '#';
            }
        });
                 // 没有上一页或上一页来自其他网站
                // 直接跳转到首页作为备用方案
        backButton.addEventListener('touchstart', function() {
            this.style.transform = 'scale(1.1)';
        });
        backButton.addEventListener('touchend', function() {
            this.style.transform = 'scale(1)';
        });

    });
    </script>

      <style>
    /* 白色过场遮罩 */
    .page-transition {
      position: fixed;
      inset: 0;
      background-color: #fff;
      z-index: 9999;
      opacity: 1;
      pointer-events: none;
      transition: opacity 0.8s ease;
    }
    .page-transition.hidden {
      opacity: 0;
      pointer-events: none;
    }

    /* 页面淡入动画 */
    body.fade-in {
      opacity: 0;
      transition: opacity 0.8s ease;
    }
    body.fade-in.visible {
      opacity: 1;
    }
  </style>

  <div class="page-transition" id="page-transition"></div>

  <script>
    document.addEventListener("DOMContentLoaded", function() {
      const overlay = document.getElementById("page-transition");
      const body = document.body;

      // 页面加载完后淡出白幕 + 淡入内容
      requestAnimationFrame(() => {
        overlay.classList.add("hidden");
        body.classList.add("visible");
      });

      // 页面跳转时再显示白幕
      document.querySelectorAll("a").forEach(link => {
        const url = link.getAttribute("href");
        if (url && !url.startsWith("#") && !url.startsWith("mailto:") && !url.startsWith("tel:")) {
          link.addEventListener("click", e => {
            // 打开新标签页或外链不触发动画
            if (e.metaKey || e.ctrlKey || link.target === "_blank") return;
            e.preventDefault();

            overlay.classList.remove("hidden");

            // 默认白幕持续时间 0.6s
            let delay = 600;

            // 特定页面延长至 2s
            const targetUrl = "https://www.ignoredone.space/index.php/resource/";
            if (url === targetUrl || url.endsWith("/index.php/resource/")) {
              delay = 2000;
            }

            setTimeout(() => {
              window.location.href = url;
            }, delay);
          });
        }
      });

      // 页面初始时淡入效果
      body.classList.add("fade-in");
      setTimeout(() => body.classList.add("visible"), 50);
    });
  </script>
    <style>
  /* ===== 桌面端顶部毛玻璃页眉 ===== */
  .custom-header {
    position: fixed;
    top: 25px;
    left: 50%;
    transform: translateX(-50%);
    width: 25%;
    max-width: 1100px;
    height: 45px;
    background: rgba(225, 225, 225, 0.5);
    backdrop-filter: blur(12px);
    border-radius: 100px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0 18px;
    z-index: 9998;
    box-shadow: 0 4px 8px rgba(0,0,0,0.07);
  }

  .custom-header .logo img {
    width: 25px;
    height: 25px;
    object-fit: contain;
    display: block;
  }

  .custom-header .menu-btn {
    background: none;
    border: none;
    padding: 0;
    cursor: pointer;
  }
  .custom-header .menu-btn img {
    width: 20px;
    height: 20px;
    object-fit: contain;
  }

  /* ===== 弹窗 ===== */
  .custom-popup {
    position: fixed;
    top: 12%;
    right: calc(50% - 12.5%);
    width: 200px;
    background: rgba(225, 225, 225, 0.5);
    backdrop-filter: blur(12px);
    border-radius: 14px;
    box-shadow: 0 4px 8px rgba(0,0,0,0.07);
    padding: 12px 0;
    display: none;
    z-index: 9998;
  }
  .custom-popup.show {
    display: block;
    animation: fadeInUp 0.25s ease-in-out;
  }
  @keyframes fadeInUp {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
  }

  .custom-popup .iq-list {
    list-style: none;
    margin: 0;
    padding: 0;
    display: flex;
    flex-direction: column;
    gap: 10px;
    align-items: center;
  }
  .custom-popup .iq-list a {
    display: inline-block;
    padding: 4px 30px;
    text-decoration: none;
    font-size: 15px;
    line-height: 1.2;
    color: #333;
    border-radius: 6px;
    transition: background 0.3s;
    text-align: center;
  }
  .custom-popup .iq-list a:hover { background: rgba(255,255,255,0.7); }
  .custom-popup .subtitle {
    display: block;
    font-size: 12px;
    color: #666;
  }

  </style>

    <style>
    /*  特定页面样式覆盖 */
    .custom-header {
      left: 2.5% !important;
      transform: none !important;
      width: 12% !important;
    }
    .custom-popup {
      top: 12%;
      left: 3.5%;
      width: 200px;
    }
  </style>
  
  <!-- ===== 桌面端结构 ===== -->
  <div class="custom-header">
    <div class="logo">
      <a href="a">
        <img src="icon/logo (2).png" alt="Logo">
      </a>
    </div>
    <button class="menu-btn" id="menuToggle">
      <img src="icon/menu.png" alt="Menu">
    </button>
  </div>

  <!-- ===== 弹窗 ===== -->
  <div class="custom-popup" id="popupMenu">
      <ul class="iq-list">
          <li><a href="1.html" target="_blank">守望石像<span class="subtitle">文物简介</span></a></li>
          <li><a href="2.html" target="_blank">麦田对话<span class="subtitle">它的过去…？</span></a></li>
          <li><a href="3.html" target="_blank">衍生设计<span class="subtitle">我的朋友石像生</span></a></li>
          <li><a href="4.html" target="_blank">互动体验<span class="subtitle">如果在秋日&nbsp;一个归乡人</span></a></li>
          <li><a href="5.html" target="_blank">麦田来信<span class="subtitle">爱你朋友&nbsp;明天见</span></a></li>
  		  <li><a href="game.html" target="_blank">一起玩吧！<span class="subtitle">不必做赢家&nbsp;玩家也很好</span></a></li>
      </ul>
  </div>

  <script>
  document.addEventListener("DOMContentLoaded", () => {
    // 当非PC端时不执行悬浮栏相关代码
    if (window.innerWidth <= 768) return;
    
    const popup = document.getElementById("popupMenu");
    const desktopBtn = document.getElementById("menuToggle");

    const toggleMenu = (e) => {
      e.stopPropagation();
      popup.classList.toggle("show");
    };

    if (desktopBtn) desktopBtn.addEventListener("click", toggleMenu);

    // 点击外部关闭
    document.addEventListener("click", (e) => {
      if (!popup.contains(e.target) && !e.target.closest("#menuToggle")) {
        popup.classList.remove("show");
      }
    });
  });
  </script>

</head>
</html>

</html>